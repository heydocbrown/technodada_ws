import{r as s,j as e,c as R}from"./App-BiV6oCY1.js";import{T as A}from"./ThumbnailSelector-D2cdcWOr.js";function p({prompt:t,imageUrl:a,startOverlay:o}){const[n,d]=s.useState(!1),[m,i]=s.useState(0),[u,f]=s.useState(1),[E,x]=s.useState(100),[v,g]=s.useState(!1),j=s.useRef(null),l=s.useRef(null);s.useEffect(()=>{t&&a&&(d(!1),i(0),x(100),g(!1),l.current&&clearInterval(l.current))},[t,a]),s.useEffect(()=>{if(o&&n&&m>0&&!v){g(!0);const r=document.getElementById("gnosisLevel");return r&&(r.textContent="0%"),setTimeout(()=>{let c=100;const I=7e3/100;l.current=setInterval(()=>{if(c-=1,c<=0){c=0,clearInterval(l.current);const h=document.getElementById("gnosisLevel");h&&(h.textContent="100%")}x(c);const N=document.getElementById("gnosisLevel");if(N){const h=Math.round(100-c);N.textContent=h+"%"}},I)},3e3),()=>{l.current&&clearInterval(l.current)}}},[o,n,m,v]);const y=r=>{d(!0),i(r.target.naturalHeight),f(r.target.naturalWidth/r.target.naturalHeight)};return!t&&!a?e.jsx("div",{className:"overlay-section",children:e.jsxs("div",{className:"terminal-window",children:[e.jsx("div",{className:"terminal-header",children:"> FUSION_CHAMBER.DAT"}),e.jsx("div",{className:"overlay-viewer",children:e.jsx("div",{className:"overlay-container",children:e.jsxs("div",{className:"overlay-text",style:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center"},children:["> NO REALITY_LOADED",e.jsx("br",{}),"> FUSION_CHAMBER EMPTY",e.jsx("br",{}),"> SELECT FRAGMENT TO BEGIN OVERLAY"]})})})]})}):e.jsx("div",{className:"overlay-section",children:e.jsxs("div",{className:"terminal-window",children:[e.jsx("div",{className:"terminal-header",children:"> INITIATING REALITY_FUSION..."}),e.jsx("div",{className:"overlay-viewer",children:e.jsxs("div",{className:"overlay-container",style:{minHeight:n?`${600/u}px`:"500px",maxHeight:"700px"},children:[e.jsxs("div",{className:"overlay-text",children:["> ",e.jsx("span",{dangerouslySetInnerHTML:{__html:(t==null?void 0:t.replace(/\n/g,"<br/>"))||""}})]}),a&&n&&e.jsx("img",{ref:j,src:a,alt:"REALITY_OVERLAY",className:"overlay-image",style:{display:"block",clipPath:`inset(${E}% 0 0 0)`}}),a&&!n&&e.jsx("img",{src:a,alt:"PRELOAD",onLoad:y,style:{display:"none"}}),a&&!n&&e.jsxs("div",{className:"overlay-text",style:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",backgroundColor:"var(--gray-1)",zIndex:10},children:["> LOADING VISUAL_OVERLAY",e.jsx("br",{}),"> PREPARING FUSION_SEQUENCE"]})]})})]})})}function L(){const[t,a]=s.useState(null),[o,n]=s.useState(!0),d=m=>{a(m),n(!1);const i=document.getElementById("gnosisLevel");i&&(i.textContent="0%"),setTimeout(()=>{const u=window.pageYOffset||document.documentElement.scrollTop;n(!0),setTimeout(()=>{window.scrollTo({top:u,behavior:"instant"})},0)},11e3)};return e.jsxs("div",{className:"art-viewer-container",children:[e.jsxs("header",{className:"art-viewer-header",children:[e.jsx("h1",{className:"glitch",children:"TECHNODADA_FUSION"}),e.jsx("p",{className:"error-message",children:"WARNING: Reality layers may merge unexpectedly"})]}),e.jsx(A,{onArtSelect:d,isVisible:o}),t&&e.jsx("div",{className:"content-display",children:e.jsx(p,{prompt:(t==null?void 0:t.cleaned_prompt)||null,imageUrl:t?`https://f005.backblazeb2.com/file/td-website/${t.backblaze_path}`:null,startOverlay:t!==null})}),e.jsxs("nav",{className:"error-nav",style:{textAlign:"center",marginTop:"40px"},children:[e.jsx("a",{href:"/",className:"error-link",children:"[RETURN_TO_404]"}),e.jsx("a",{href:"/pages/poems.html",className:"error-link",children:"[TEXT_VIEWER]"}),e.jsx("a",{href:"/pages/poem2.html",className:"error-link",children:"[GALLERY_VIEWER]"}),e.jsx("a",{href:"/pages/gallery.html",className:"error-link",children:"[BROWSE_GALLERY]"}),e.jsx("a",{href:"/pages/tools.html",className:"error-link",children:"[ACCESS_TOOLS]"})]})]})}R.createRoot(document.getElementById("root")).render(e.jsx(s.StrictMode,{children:e.jsx(L,{})}));
