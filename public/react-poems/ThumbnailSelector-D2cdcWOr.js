import{r as n,j as t}from"./App-BiV6oCY1.js";function D({onArtSelect:A,isVisible:c=!0}){const[d,E]=n.useState([]),[i,y]=n.useState([]),[l,I]=n.useState("dadacat"),[S,x]=n.useState(!0),[T,j]=n.useState(null),[m,g]=n.useState({}),[r,b]=n.useState(1),h=8;n.useEffect(()=>{_()},[]),n.useEffect(()=>{L()},[d,l]);const _=async()=>{try{console.log("Attempting to fetch data...");const e=await fetch("https://f005.backblazeb2.com/file/td-website/index.json");if(console.log("Response received:",e.status,e.statusText),!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const a=await e.json();if(console.log("Raw data received:",a),!a.images||!Array.isArray(a.images))throw new Error("Invalid data structure - no images array");const s=a.images.filter(p=>p.on_website==="yes");console.log("Website eligible items:",s.length),console.log("First few items:",s.slice(0,3)),console.log("Available artprojects:",[...new Set(a.images.map(p=>p.artproject))]),E(s),x(!1)}catch(e){console.error("Error fetching art data:",e),console.error("Error details:",e.message),x(!1)}},L=()=>{console.log("Filtering data. Active project:",l),console.log("Available artprojects:",[...new Set(d.map(s=>s.artproject))]);const e=d.filter(s=>s.artproject===l);console.log("Filtered results:",e.length,"items"),y(e);const a={};e.forEach(s=>{a[s.run_id]="loading"}),g(a)},v=e=>{I(e),j(null),b(1);const a=document.getElementById("artMode");a&&(a.textContent=e.toUpperCase())},w=e=>{j(e.run_id),A(e)},F=e=>{g(a=>({...a,[e]:"loaded"}))},R=e=>{g(a=>({...a,[e]:"error"}))},C=e=>`https://f005.backblazeb2.com/file/td-website/${e}`,o=Math.ceil(i.length/h),u=(r-1)*h,N=u+h,G=i.slice(u,N),f=e=>{if(e>=1&&e<=o){b(e);const a=document.querySelector(".thumbnail-grid-container");a&&a.scrollIntoView({behavior:"smooth"})}};return S?t.jsx("div",{className:"art-selector-section",children:t.jsxs("div",{className:"terminal-window",children:[t.jsx("div",{className:"terminal-header",children:"> LOADING VISUAL_MATRIX..."}),t.jsx("div",{className:"prompt-terminal",style:{textAlign:"center",padding:"40px"},children:t.jsxs("div",{className:"prompt-text",children:["> INITIALIZING GALLERY_BUFFER",t.jsx("br",{}),"> SCANNING REALITY_FRAGMENTS",t.jsx("br",{}),"> PLEASE_WAIT...",t.jsx("span",{className:"typing-cursor"})]})})]})}):t.jsx("div",{className:"art-selector-section",style:{transition:"opacity 0.5s ease-in-out, max-height 0.5s ease-in-out",opacity:c?1:0,maxHeight:c?"2000px":"0",overflow:"hidden",pointerEvents:c?"auto":"none"},children:t.jsxs("div",{className:"terminal-window",children:[t.jsx("div",{className:"terminal-header",children:"> SELECT_REALITY_FRAGMENT.EXE"}),t.jsxs("div",{className:"project-buttons",children:[t.jsx("button",{className:`project-button ${l==="dadacat"?"active":""}`,onClick:()=>v("dadacat"),children:"DADACAT"}),t.jsx("button",{className:`project-button ${l==="truthterminal"?"active":""}`,onClick:()=>v("truthterminal"),children:"GOATSE GNOSIS"})]}),t.jsxs("div",{className:"thumbnail-grid-container",children:[i.length===0?t.jsx("div",{className:"prompt-terminal",style:{textAlign:"center",padding:"40px"},children:t.jsxs("div",{className:"prompt-text",children:["> NO_FRAGMENTS_FOUND",t.jsx("br",{}),"> REALITY_BUFFER_EMPTY"]})}):t.jsx("div",{className:"thumbnail-grid",children:G.map(e=>t.jsxs("div",{className:`thumbnail-item ${T===e.run_id?"selected":""}`,onClick:()=>w(e),children:[m[e.run_id]==="loading"&&t.jsx("div",{className:"thumbnail-loading",children:"LOADING..."}),m[e.run_id]==="error"&&t.jsx("div",{className:"thumbnail-loading",children:"ERROR_LOADING"}),t.jsx("img",{src:C(e.backblaze_path),alt:`Fragment ${e.run_id}`,className:"thumbnail-image",onLoad:()=>F(e.run_id),onError:()=>R(e.run_id),style:{display:m[e.run_id]==="loaded"?"block":"none"}}),t.jsxs("div",{className:"thumbnail-overlay",children:["FRAGMENT_",e.run_id.slice(-6)]})]},e.run_id))}),o>1&&t.jsxs("div",{className:"pagination-controls",style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"15px",marginTop:"30px",fontFamily:"'VT323', monospace",color:"var(--terminal-green)"},children:[t.jsx("button",{className:"pagination-button",onClick:()=>f(r-1),disabled:r===1,style:{padding:"8px 15px",background:r===1?"var(--gray-2)":"var(--gray-1)",border:"1px solid var(--terminal-green)",color:r===1?"var(--gray-3)":"var(--terminal-green)",cursor:r===1?"not-allowed":"pointer",fontFamily:"inherit",fontSize:"1.2rem"},children:"< PREV"}),t.jsxs("span",{style:{fontSize:"1.2rem"},children:["PAGE ",r," / ",o]}),t.jsx("button",{className:"pagination-button",onClick:()=>f(r+1),disabled:r===o,style:{padding:"8px 15px",background:r===o?"var(--gray-2)":"var(--gray-1)",border:"1px solid var(--terminal-green)",color:r===o?"var(--gray-3)":"var(--terminal-green)",cursor:r===o?"not-allowed":"pointer",fontFamily:"inherit",fontSize:"1.2rem"},children:"NEXT >"})]})]}),i.length>0&&t.jsx("div",{className:"prompt-terminal",style:{textAlign:"center",padding:"10px 15px",marginTop:"15px",minHeight:"auto",fontSize:"0.9rem"},children:t.jsxs("div",{className:"prompt-text",style:{fontSize:"1rem",lineHeight:"1.4"},children:["> ",i.length," FRAGMENTS_AVAILABLE",o>1&&t.jsxs(t.Fragment,{children:[" | SHOWING ",u+1,"-",Math.min(N,i.length)]}),t.jsx("br",{}),"> CLICK_TO_MANIFEST_REALITY"]})})]})})}export{D as T};
