import{r as t,j as e}from"./App-B9regU7K.js";function f({prompt:s,syncDuration:l,onTypingComplete:a}){const[i,d]=t.useState(""),[r,m]=t.useState(0),[n,o]=t.useState(!1);return t.useEffect(()=>{s&&(d(""),m(0),o(!0))},[s]),t.useEffect(()=>{if(n&&s&&r<s.length&&l){const h=l/s.length,c=setTimeout(()=>{d(x=>x+s[r]),m(x=>x+1)},h);return()=>clearTimeout(c)}else n&&r>=s.length&&(o(!1),a&&a())},[r,n,s,l,a]),s?e.jsx("div",{className:"prompt-section",children:e.jsxs("div",{className:"terminal-window",children:[e.jsx("div",{className:"terminal-header",children:"> DECODING LINGUISTIC_MATRIX..."}),e.jsx("div",{className:"prompt-terminal",children:e.jsxs("div",{className:"prompt-text",children:["> ",e.jsx("span",{dangerouslySetInnerHTML:{__html:i.replace(/\n/g,"<br/>")}}),n&&e.jsx("span",{className:"typing-cursor"})]})})]})}):e.jsx("div",{className:"prompt-section",children:e.jsxs("div",{className:"terminal-window",children:[e.jsx("div",{className:"terminal-header",children:"> PROMPT_BUFFER.TXT"}),e.jsx("div",{className:"prompt-terminal",children:e.jsxs("div",{className:"prompt-text",children:["> AWAITING SELECTION...",e.jsx("br",{}),"> CONSCIOUSNESS STANDING BY...",e.jsx("span",{className:"typing-cursor"})]})})]})})}function j({imageUrl:s,startReveal:l,syncDuration:a}){const[i,d]=t.useState(!1),[r,m]=t.useState(100),[n,o]=t.useState(0),h=t.useRef(null),c=t.useRef(null);t.useEffect(()=>{s&&(d(!1),m(100),o(0))},[s]),t.useEffect(()=>{if(l&&i&&n>0&&a){const u=a/100;let N=100;return c.current=setInterval(()=>{if(N-=1,N<=0){N=0,clearInterval(c.current);const v=document.getElementById("gnosisLevel");v&&(v.textContent="100%")}m(N);const g=document.getElementById("gnosisLevel");g&&(g.textContent=Math.round(100-N)+"%")},u),()=>{c.current&&clearInterval(c.current)}}},[l,i,n,a]);const x=u=>{d(!0),o(u.target.naturalHeight)};return s?e.jsx("div",{className:"image-section",children:e.jsxs("div",{className:"terminal-window",children:[e.jsx("div",{className:"terminal-header",children:"> MANIFESTING VISUAL_THOUGHTFORM..."}),e.jsx("div",{className:"image-viewer",children:e.jsxs("div",{className:"image-container",children:[e.jsx("img",{ref:h,src:s,alt:"VISUAL_MANIFESTATION",className:"art-image",onLoad:x,style:{display:i?"block":"none"}}),!i&&e.jsx("div",{className:"prompt-terminal",style:{minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("div",{className:"loading",children:"LOADING VISUAL_DATA"})}),i&&e.jsx("div",{className:"image-reveal-mask",style:{height:`${r}%`,bottom:0,top:"auto"}})]})})]})}):e.jsx("div",{className:"image-section",children:e.jsxs("div",{className:"terminal-window",children:[e.jsx("div",{className:"terminal-header",children:"> VISUAL_CORTEX.DAT"}),e.jsx("div",{className:"image-viewer",children:e.jsx("div",{className:"prompt-terminal",style:{minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{className:"prompt-text",style:{textAlign:"center"},children:["> NO VISION LOADED",e.jsx("br",{}),"> RETINAL_BUFFER EMPTY"]})})})]})})}export{j as I,f as P};
