import{r as s,j as e,P as S,I as v,c as C}from"./App-BSjcoG4l.js";const b="https://f005.backblazeb2.com/file/td-website/index.json";function y({onArtSelect:n}){const[l,j]=s.useState([]),[a,c]=s.useState(null),[i,d]=s.useState([]),[u,o]=s.useState(!0),[m,g]=s.useState(null);s.useEffect(()=>{h()},[]),s.useEffect(()=>{if(a&&l.length>0){console.log("Filtering for project:",a),console.log("Total artData items:",l.length);const t=l.filter(r=>r.artproject===a&&r.on_website==="yes");console.log("Filtered items:",t.length),console.log("Sample filtered item:",t[0]),d(t)}else d([])},[a,l]);const h=async()=>{try{o(!0);const t=await fetch(b);if(!t.ok)throw new Error("Failed to fetch art data");const p=(await t.json()).images||[];j(p),o(!1)}catch(t){console.error("Error fetching art data:",t),g("REALITY_FETCH_ERROR: Unable to retrieve art data"),o(!1)}},x=t=>{c(t),n(null);const r=document.getElementById("artMode");r&&(r.textContent=t==="dadacat"?"DADACAT":"GOATSE")},N=t=>{const r=t.target.value;if(r){const p=l.find(E=>E.run_id===r);p&&n(p)}},A=t=>t.cleaned_prompt.split(" ").slice(0,8).join(" ")+(t.cleaned_prompt.split(" ").length>8?"...":"");return u?e.jsx("div",{className:"art-selector-section",children:e.jsxs("div",{className:"terminal-window",children:[e.jsxs("div",{className:"terminal-header",children:["> LOADING ART_DATABASE...",e.jsx("br",{}),"> ESTABLISHING BACKBLAZE_CONNECTION..."]}),e.jsx("div",{className:"terminal-body",children:e.jsx("div",{className:"loading",children:"SCANNING REALITY_FRAGMENTS"})})]})}):m?e.jsx("div",{className:"art-selector-section",children:e.jsx("div",{className:"terminal-window",children:e.jsx("div",{className:"terminal-header error-message",children:m})})}):e.jsxs("div",{className:"art-selector-section",children:[e.jsxs("div",{className:"project-buttons",children:[e.jsx("button",{className:`project-button ${a==="dadacat"?"active":""}`,onClick:()=>x("dadacat"),children:"thus spake DadaCat"}),e.jsx("button",{className:`project-button ${a==="truthterminal"?"active":""}`,onClick:()=>x("truthterminal"),children:"Warning: Goatse Gnosis"})]}),a&&e.jsx("div",{className:"dropdown-container",children:e.jsxs("select",{className:"art-dropdown",onChange:N,defaultValue:"",children:[e.jsxs("option",{value:"",children:["> SELECT VISION [",i.length," AVAILABLE]"]}),i.map(t=>e.jsx("option",{value:t.run_id,children:A(t)},t.run_id))]})})]})}function T(){const[n,l]=s.useState(null),[j,a]=s.useState(!1),[c,i]=s.useState(null),d=o=>{l(o),a(!1);const m=o.cleaned_prompt.length,g=Math.max(8e3,Math.min(12e3,m*40));i(g);const h=document.getElementById("gnosisLevel");h&&(h.textContent="0%")},u=()=>{a(!0)};return e.jsxs("div",{className:"art-viewer-container",children:[e.jsxs("header",{className:"art-viewer-header",children:[e.jsx("h1",{className:"glitch",children:"TECHNODADA_VIEWER"}),e.jsx("p",{className:"error-message",children:"WARNING: Reality interpretation may vary"})]}),e.jsx(y,{onArtSelect:d}),e.jsxs("div",{className:"content-display",children:[e.jsx(S,{prompt:(n==null?void 0:n.cleaned_prompt)||null,syncDuration:c,onTypingComplete:u}),e.jsx(v,{imageUrl:n?`https://f005.backblazeb2.com/file/td-website/${n.backblaze_path}`:null,startReveal:n!==null,syncDuration:c})]}),e.jsxs("nav",{className:"error-nav",style:{textAlign:"center",marginTop:"40px"},children:[e.jsx("a",{href:"/",className:"error-link",children:"[RETURN_TO_404]"}),e.jsx("a",{href:"/pages/gallery.html",className:"error-link",children:"[BROWSE_GALLERY]"}),e.jsx("a",{href:"/pages/tools.html",className:"error-link",children:"[ACCESS_TOOLS]"})]})]})}const f=document.getElementById("react-root");f&&C.createRoot(f).render(e.jsx(s.StrictMode,{children:e.jsx(T,{})}));
