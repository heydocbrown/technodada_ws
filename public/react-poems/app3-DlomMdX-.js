import{r as t,j as e,c as y}from"./App-BiV6oCY1.js";import{T as I}from"./ThumbnailSelector-D2cdcWOr.js";function L({prompt:s,imageUrl:l,startOverlay:c}){const[a,o]=t.useState(!1),[d,r]=t.useState(0),[v,u]=t.useState(100),[x,g]=t.useState(!1),f=t.useRef(null),n=t.useRef(null);t.useEffect(()=>{s&&l&&(o(!1),r(0),u(100),g(!1),n.current&&clearInterval(n.current))},[s,l]),t.useEffect(()=>{if(c&&a&&d>0&&!x){g(!0);const m=document.getElementById("gnosisLevel");return m&&(m.textContent="0%"),setTimeout(()=>{let i=100;const j=7e3/100;n.current=setInterval(()=>{if(i-=1,i<=0){i=0,clearInterval(n.current);const h=document.getElementById("gnosisLevel");h&&(h.textContent="100%")}u(i);const N=document.getElementById("gnosisLevel");if(N){const h=Math.round(100-i);N.textContent=h+"%"}},j)},3e3),()=>{n.current&&clearInterval(n.current)}}},[c,a,d,x]);const E=m=>{o(!0),r(m.target.naturalHeight)};return!s&&!l?e.jsx("div",{className:"overlay-section",children:e.jsxs("div",{className:"terminal-window",children:[e.jsx("div",{className:"terminal-header",children:"> FUSION_CHAMBER.DAT"}),e.jsx("div",{className:"overlay-viewer",children:e.jsx("div",{className:"overlay-container",children:e.jsxs("div",{className:"overlay-text",style:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center"},children:["> NO REALITY_LOADED",e.jsx("br",{}),"> FUSION_CHAMBER EMPTY",e.jsx("br",{}),"> SELECT FRAGMENT TO BEGIN OVERLAY"]})})})]})}):e.jsx("div",{className:"overlay-section",children:e.jsxs("div",{className:"terminal-window",children:[e.jsx("div",{className:"terminal-header",children:"> INITIATING REALITY_FUSION..."}),e.jsx("div",{className:"overlay-viewer",children:e.jsxs("div",{className:"overlay-container",children:[e.jsxs("div",{className:"overlay-text",children:["> ",e.jsx("span",{dangerouslySetInnerHTML:{__html:(s==null?void 0:s.replace(/\n/g,"<br/>"))||""}})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("img",{ref:f,src:l,alt:"REALITY_OVERLAY",className:"overlay-image",onLoad:E,style:{display:a?"block":"none",opacity:a?1:0}}),a&&e.jsx("div",{className:"image-reveal-overlay",style:{height:`${v}%`,bottom:0,top:"auto"}})]}),l&&!a&&e.jsxs("div",{className:"overlay-text",style:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",backgroundColor:"var(--gray-1)",zIndex:10},children:["> LOADING VISUAL_OVERLAY",e.jsx("br",{}),"> PREPARING FUSION_SEQUENCE"]})]})})]})})}function R(){const[s,l]=t.useState(null),[c,a]=t.useState(!0),o=d=>{l(d),a(!1);const r=document.getElementById("gnosisLevel");r&&(r.textContent="0%"),setTimeout(()=>{const v=window.pageYOffset||document.documentElement.scrollTop;a(!0),setTimeout(()=>{window.scrollTo({top:v,behavior:"instant"})},0)},11e3)};return e.jsxs("div",{className:"art-viewer-container",children:[e.jsxs("header",{className:"art-viewer-header",children:[e.jsx("h1",{className:"glitch",children:"TECHNODADA_FUSION"}),e.jsx("p",{className:"error-message",children:"WARNING: Reality layers may merge unexpectedly"})]}),e.jsx(I,{onArtSelect:o,isVisible:c}),s&&e.jsx("div",{className:"content-display",children:e.jsx(L,{prompt:(s==null?void 0:s.cleaned_prompt)||null,imageUrl:s?`https://f005.backblazeb2.com/file/td-website/${s.backblaze_path}`:null,startOverlay:s!==null})}),e.jsxs("nav",{className:"error-nav",style:{textAlign:"center",marginTop:"40px"},children:[e.jsx("a",{href:"/",className:"error-link",children:"[RETURN_TO_404]"}),e.jsx("a",{href:"/pages/poems.html",className:"error-link",children:"[TEXT_VIEWER]"}),e.jsx("a",{href:"/pages/poem2.html",className:"error-link",children:"[GALLERY_VIEWER]"}),e.jsx("a",{href:"/pages/gallery.html",className:"error-link",children:"[BROWSE_GALLERY]"}),e.jsx("a",{href:"/pages/tools.html",className:"error-link",children:"[ACCESS_TOOLS]"})]})]})}y.createRoot(document.getElementById("root")).render(e.jsx(t.StrictMode,{children:e.jsx(R,{})}));
