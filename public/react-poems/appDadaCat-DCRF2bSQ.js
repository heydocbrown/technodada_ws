import{r as a,j as e,R as E,a as v}from"./App-B9regU7K.js";import{P as D,I as T}from"./ImageViewer-C2Gju3NJ.js";const _="https://f005.backblazeb2.com/file/td-website/index.json";function C({onArtSelect:n}){const[l,A]=a.useState([]),[f,i]=a.useState([]),[p,u]=a.useState([]),[g,d]=a.useState({}),[x,m]=a.useState(!0),[h,N]=a.useState(null);a.useEffect(()=>{j()},[]),a.useEffect(()=>{if(l.length>0){console.log("Filtering for dadacat with human_prompt"),console.log("Total artData items:",l.length);const s=l.filter(r=>r.artproject==="dadacat"&&r.on_website==="yes"&&r.human_prompt&&r.human_prompt.trim()!=="");console.log("Filtered items with human_prompt:",s.length);const t={};s.forEach(r=>{const c=r.human_prompt.trim();t[c]||(t[c]=[]),t[c].push(r)});const o=Object.keys(t).sort();console.log("Unique human_prompts:",o.length),console.log("Prompt mapping:",t),i(s),u(o),d(t)}else i([]),u([]),d({})},[l]);const j=async()=>{try{m(!0);const s=await fetch(_);if(!s.ok)throw new Error("Failed to fetch art data");const o=(await s.json()).images||[];A(o),m(!1)}catch(s){console.error("Error fetching art data:",s),N("REALITY_FETCH_ERROR: Unable to retrieve dadacat visions"),m(!1)}},S=s=>{const t=s.target.value;if(t&&g[t]){const o=g[t],r=Math.floor(Math.random()*o.length),c=o[r];console.log(`Selected prompt: "${t}" has ${o.length} items, chose index ${r}`),c&&n(c)}};return x?e.jsx("div",{className:"art-selector-section",children:e.jsxs("div",{className:"terminal-window",children:[e.jsxs("div",{className:"terminal-header",children:["> LOADING DADACAT_DATABASE...",e.jsx("br",{}),"> ESTABLISHING BACKBLAZE_CONNECTION..."]}),e.jsx("div",{className:"terminal-body",children:e.jsx("div",{className:"loading",children:"SCANNING DADACAT_FRAGMENTS"})})]})}):h?e.jsx("div",{className:"art-selector-section",children:e.jsx("div",{className:"terminal-window",children:e.jsx("div",{className:"terminal-header error-message",children:h})})}):e.jsx("div",{className:"art-selector-section",children:e.jsx("div",{className:"dropdown-container",children:e.jsxs("select",{className:"art-dropdown",onChange:S,defaultValue:"",children:[e.jsxs("option",{value:"",children:["> SELECT DADACAT VISION [",p.length," UNIQUE PROMPTS]"]}),p.map((s,t)=>e.jsx("option",{value:s,children:s},t))]})})})}function I(){const[n,l]=a.useState(null),[A,f]=a.useState(!1),[i,p]=a.useState(null),u=d=>{l(d),f(!1);const x=d.cleaned_prompt.length,m=Math.max(8e3,Math.min(12e3,x*40));p(m);const h=document.getElementById("gnosisLevel");h&&(h.textContent="0%")},g=()=>{f(!0)};return e.jsxs("div",{className:"art-viewer-container",children:[e.jsxs("header",{className:"art-viewer-header",children:[e.jsx("h1",{className:"glitch",children:"DADACAT_VIEWER"}),e.jsx("p",{className:"error-message",children:"WARNING: DadaCat visions only"})]}),e.jsx(C,{onArtSelect:u}),e.jsxs("div",{className:"content-display",children:[e.jsx(D,{prompt:(n==null?void 0:n.cleaned_prompt)||null,syncDuration:i,onTypingComplete:g}),e.jsx(T,{imageUrl:n?`https://f005.backblazeb2.com/file/td-website/${n.backblaze_path}`:null,startReveal:n!==null,syncDuration:i})]}),e.jsxs("nav",{className:"error-nav",style:{textAlign:"center",marginTop:"40px"},children:[e.jsx("a",{href:"/",className:"error-link",children:"[RETURN_TO_404]"}),e.jsx("a",{href:"/pages/gallery.html",className:"error-link",children:"[BROWSE_GALLERY]"}),e.jsx("a",{href:"/pages/poems.html",className:"error-link",children:"[ALL_VISIONS]"})]})]})}E.createRoot(document.getElementById("react-root")).render(e.jsx(v.StrictMode,{children:e.jsx(I,{})}));
