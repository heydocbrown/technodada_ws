import{r as s,j as e,P as D,I as G,c as M}from"./App-BSjcoG4l.js";function O({onArtSelect:n,isVisible:h=!0}){const[g,p]=s.useState([]),[l,b]=s.useState([]),[c,u]=s.useState("dadacat"),[v,x]=s.useState(!0),[j,N]=s.useState(null),[d,m]=s.useState({}),[r,y]=s.useState(1),E=8;s.useEffect(()=>{_()},[]),s.useEffect(()=>{L()},[g,c]);const _=async()=>{try{console.log("Attempting to fetch data...");const t=await fetch("https://f005.backblazeb2.com/file/td-website/index.json");if(console.log("Response received:",t.status,t.statusText),!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.json();if(console.log("Raw data received:",a),!a.images||!Array.isArray(a.images))throw new Error("Invalid data structure - no images array");const o=a.images.filter(A=>A.on_website==="yes");console.log("Website eligible items:",o.length),console.log("First few items:",o.slice(0,3)),console.log("Available artprojects:",[...new Set(a.images.map(A=>A.artproject))]),p(o),x(!1)}catch(t){console.error("Error fetching art data:",t),console.error("Error details:",t.message),x(!1)}},L=()=>{console.log("Filtering data. Active project:",c),console.log("Available artprojects:",[...new Set(g.map(o=>o.artproject))]);const t=g.filter(o=>o.artproject===c);console.log("Filtered results:",t.length,"items"),b(t);const a={};t.forEach(o=>{a[o.run_id]="loading"}),m(a)},S=t=>{u(t),N(null),y(1);const a=document.getElementById("artMode");a&&(a.textContent=t.toUpperCase())},R=t=>{N(t.run_id),n(t)},w=t=>{m(a=>({...a,[t]:"loaded"}))},C=t=>{m(a=>({...a,[t]:"error"}))},F=t=>`https://f005.backblazeb2.com/file/td-website/${t}`,i=Math.ceil(l.length/E),f=(r-1)*E,T=f+E,k=l.slice(f,T),I=t=>{if(t>=1&&t<=i){y(t);const a=document.querySelector(".thumbnail-grid-container");a&&a.scrollIntoView({behavior:"smooth"})}};return v?e.jsx("div",{className:"art-selector-section",children:e.jsxs("div",{className:"terminal-window",children:[e.jsx("div",{className:"terminal-header",children:"> LOADING VISUAL_MATRIX..."}),e.jsx("div",{className:"prompt-terminal",style:{textAlign:"center",padding:"40px"},children:e.jsxs("div",{className:"prompt-text",children:["> INITIALIZING GALLERY_BUFFER",e.jsx("br",{}),"> SCANNING REALITY_FRAGMENTS",e.jsx("br",{}),"> PLEASE_WAIT...",e.jsx("span",{className:"typing-cursor"})]})})]})}):e.jsx("div",{className:"art-selector-section",style:{transition:"opacity 0.5s ease-in-out, max-height 0.5s ease-in-out",opacity:h?1:0,maxHeight:h?"2000px":"0",overflow:"hidden",pointerEvents:h?"auto":"none"},children:e.jsxs("div",{className:"terminal-window",children:[e.jsx("div",{className:"terminal-header",children:"> SELECT_REALITY_FRAGMENT.EXE"}),e.jsxs("div",{className:"project-buttons",children:[e.jsx("button",{className:`project-button ${c==="dadacat"?"active":""}`,onClick:()=>S("dadacat"),children:"DADACAT"}),e.jsx("button",{className:`project-button ${c==="truthterminal"?"active":""}`,onClick:()=>S("truthterminal"),children:"GOATSE GNOSIS"})]}),e.jsxs("div",{className:"thumbnail-grid-container",children:[l.length===0?e.jsx("div",{className:"prompt-terminal",style:{textAlign:"center",padding:"40px"},children:e.jsxs("div",{className:"prompt-text",children:["> NO_FRAGMENTS_FOUND",e.jsx("br",{}),"> REALITY_BUFFER_EMPTY"]})}):e.jsx("div",{className:"thumbnail-grid",children:k.map(t=>e.jsxs("div",{className:`thumbnail-item ${j===t.run_id?"selected":""}`,onClick:()=>R(t),children:[d[t.run_id]==="loading"&&e.jsx("div",{className:"thumbnail-loading",children:"LOADING..."}),d[t.run_id]==="error"&&e.jsx("div",{className:"thumbnail-loading",children:"ERROR_LOADING"}),e.jsx("img",{src:F(t.backblaze_path),alt:`Fragment ${t.run_id}`,className:"thumbnail-image",onLoad:()=>w(t.run_id),onError:()=>C(t.run_id),style:{display:d[t.run_id]==="loaded"?"block":"none"}}),e.jsxs("div",{className:"thumbnail-overlay",children:["FRAGMENT_",t.run_id.slice(-6)]})]},t.run_id))}),i>1&&e.jsxs("div",{className:"pagination-controls",style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"15px",marginTop:"30px",fontFamily:"'VT323', monospace",color:"var(--terminal-green)"},children:[e.jsx("button",{className:"pagination-button",onClick:()=>I(r-1),disabled:r===1,style:{padding:"8px 15px",background:r===1?"var(--gray-2)":"var(--gray-1)",border:"1px solid var(--terminal-green)",color:r===1?"var(--gray-3)":"var(--terminal-green)",cursor:r===1?"not-allowed":"pointer",fontFamily:"inherit",fontSize:"1.2rem"},children:"< PREV"}),e.jsxs("span",{style:{fontSize:"1.2rem"},children:["PAGE ",r," / ",i]}),e.jsx("button",{className:"pagination-button",onClick:()=>I(r+1),disabled:r===i,style:{padding:"8px 15px",background:r===i?"var(--gray-2)":"var(--gray-1)",border:"1px solid var(--terminal-green)",color:r===i?"var(--gray-3)":"var(--terminal-green)",cursor:r===i?"not-allowed":"pointer",fontFamily:"inherit",fontSize:"1.2rem"},children:"NEXT >"})]})]}),l.length>0&&e.jsx("div",{className:"prompt-terminal",style:{textAlign:"center",padding:"10px 15px",marginTop:"15px",minHeight:"auto",fontSize:"0.9rem"},children:e.jsxs("div",{className:"prompt-text",style:{fontSize:"1rem",lineHeight:"1.4"},children:["> ",l.length," FRAGMENTS_AVAILABLE",i>1&&e.jsxs(e.Fragment,{children:[" | SHOWING ",f+1,"-",Math.min(T,l.length)]}),e.jsx("br",{}),"> CLICK_TO_MANIFEST_REALITY"]})})]})})}function P(){const[n,h]=s.useState(null),[g,p]=s.useState(!1),[l,b]=s.useState(null),[c,u]=s.useState(!0),v=j=>{h(j),p(!1),u(!1);const N=j.cleaned_prompt.length,d=Math.max(8e3,Math.min(12e3,N*40));b(d);const m=document.getElementById("gnosisLevel");m&&(m.textContent="0%"),setTimeout(()=>{u(!0)},d+1e3)},x=()=>{p(!0)};return e.jsxs("div",{className:"art-viewer-container",children:[e.jsxs("header",{className:"art-viewer-header",children:[e.jsx("h1",{className:"glitch",children:"TECHNODADA_GALLERY"}),e.jsx("p",{className:"error-message",children:"WARNING: Visual reality interpretation may vary"})]}),e.jsx(O,{onArtSelect:v,isVisible:c}),n&&e.jsxs("div",{className:"content-display",children:[e.jsx(D,{prompt:(n==null?void 0:n.cleaned_prompt)||null,syncDuration:l,onTypingComplete:x}),e.jsx(G,{imageUrl:n?`https://f005.backblazeb2.com/file/td-website/${n.backblaze_path}`:null,startReveal:n!==null,syncDuration:l})]}),e.jsxs("nav",{className:"error-nav",style:{textAlign:"center",marginTop:"40px"},children:[e.jsx("a",{href:"/",className:"error-link",children:"[RETURN_TO_404]"}),e.jsx("a",{href:"/pages/poems.html",className:"error-link",children:"[TEXT_VIEWER]"}),e.jsx("a",{href:"/pages/gallery.html",className:"error-link",children:"[BROWSE_GALLERY]"}),e.jsx("a",{href:"/pages/tools.html",className:"error-link",children:"[ACCESS_TOOLS]"})]})]})}M.createRoot(document.getElementById("root")).render(e.jsx(s.StrictMode,{children:e.jsx(P,{})}));
