import{r as s,j as e,P as k,I as D,c as G}from"./App-BSjcoG4l.js";function O({onArtSelect:l}){const[m,A]=s.useState([]),[n,h]=s.useState([]),[c,u]=s.useState("dadacat"),[x,g]=s.useState(!0),[j,p]=s.useState(null),[d,N]=s.useState({}),[r,f]=s.useState(1),b=12;s.useEffect(()=>{T()},[]),s.useEffect(()=>{_()},[m,c]);const T=async()=>{try{console.log("Attempting to fetch data...");const t=await fetch("https://f005.backblazeb2.com/file/td-website/index.json");if(console.log("Response received:",t.status,t.statusText),!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.json();if(console.log("Raw data received:",a),!a.images||!Array.isArray(a.images))throw new Error("Invalid data structure - no images array");const o=a.images.filter(E=>E.on_website==="yes");console.log("Website eligible items:",o.length),console.log("First few items:",o.slice(0,3)),console.log("Available artprojects:",[...new Set(a.images.map(E=>E.artproject))]),A(o),g(!1)}catch(t){console.error("Error fetching art data:",t),console.error("Error details:",t.message),g(!1)}},_=()=>{console.log("Filtering data. Active project:",c),console.log("Available artprojects:",[...new Set(m.map(o=>o.artproject))]);const t=m.filter(o=>o.artproject===c);console.log("Filtered results:",t.length,"items"),h(t);const a={};t.forEach(o=>{a[o.run_id]="loading"}),N(a)},y=t=>{u(t),p(null),f(1);const a=document.getElementById("artMode");a&&(a.textContent=t.toUpperCase())},L=t=>{p(t.run_id),l(t)},R=t=>{N(a=>({...a,[t]:"loaded"}))},C=t=>{N(a=>({...a,[t]:"error"}))},w=t=>`https://f005.backblazeb2.com/file/td-website/${t}`,i=Math.ceil(n.length/b),v=(r-1)*b,S=v+b,F=n.slice(v,S),I=t=>{if(t>=1&&t<=i){f(t);const a=document.querySelector(".thumbnail-grid-container");a&&a.scrollIntoView({behavior:"smooth"})}};return x?e.jsx("div",{className:"art-selector-section",children:e.jsxs("div",{className:"terminal-window",children:[e.jsx("div",{className:"terminal-header",children:"> LOADING VISUAL_MATRIX..."}),e.jsx("div",{className:"prompt-terminal",style:{textAlign:"center",padding:"40px"},children:e.jsxs("div",{className:"prompt-text",children:["> INITIALIZING GALLERY_BUFFER",e.jsx("br",{}),"> SCANNING REALITY_FRAGMENTS",e.jsx("br",{}),"> PLEASE_WAIT...",e.jsx("span",{className:"typing-cursor"})]})})]})}):e.jsx("div",{className:"art-selector-section",children:e.jsxs("div",{className:"terminal-window",children:[e.jsx("div",{className:"terminal-header",children:"> SELECT_REALITY_FRAGMENT.EXE"}),e.jsxs("div",{className:"project-buttons",children:[e.jsx("button",{className:`project-button ${c==="dadacat"?"active":""}`,onClick:()=>y("dadacat"),children:"DADACAT"}),e.jsx("button",{className:`project-button ${c==="truthterminal"?"active":""}`,onClick:()=>y("truthterminal"),children:"GOATSE GNOSIS"})]}),e.jsxs("div",{className:"thumbnail-grid-container",children:[n.length===0?e.jsx("div",{className:"prompt-terminal",style:{textAlign:"center",padding:"40px"},children:e.jsxs("div",{className:"prompt-text",children:["> NO_FRAGMENTS_FOUND",e.jsx("br",{}),"> REALITY_BUFFER_EMPTY"]})}):e.jsx("div",{className:"thumbnail-grid",children:F.map(t=>e.jsxs("div",{className:`thumbnail-item ${j===t.run_id?"selected":""}`,onClick:()=>L(t),children:[d[t.run_id]==="loading"&&e.jsx("div",{className:"thumbnail-loading",children:"LOADING..."}),d[t.run_id]==="error"&&e.jsx("div",{className:"thumbnail-loading",children:"ERROR_LOADING"}),e.jsx("img",{src:w(t.backblaze_path),alt:`Fragment ${t.run_id}`,className:"thumbnail-image",onLoad:()=>R(t.run_id),onError:()=>C(t.run_id),style:{display:d[t.run_id]==="loaded"?"block":"none"}}),e.jsxs("div",{className:"thumbnail-overlay",children:["FRAGMENT_",t.run_id.slice(-6)]})]},t.run_id))}),i>1&&e.jsxs("div",{className:"pagination-controls",style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"15px",marginTop:"30px",fontFamily:"'VT323', monospace",color:"var(--terminal-green)"},children:[e.jsx("button",{className:"pagination-button",onClick:()=>I(r-1),disabled:r===1,style:{padding:"8px 15px",background:r===1?"var(--gray-2)":"var(--gray-1)",border:"1px solid var(--terminal-green)",color:r===1?"var(--gray-3)":"var(--terminal-green)",cursor:r===1?"not-allowed":"pointer",fontFamily:"inherit",fontSize:"1.2rem"},children:"< PREV"}),e.jsxs("span",{style:{fontSize:"1.2rem"},children:["PAGE ",r," / ",i]}),e.jsx("button",{className:"pagination-button",onClick:()=>I(r+1),disabled:r===i,style:{padding:"8px 15px",background:r===i?"var(--gray-2)":"var(--gray-1)",border:"1px solid var(--terminal-green)",color:r===i?"var(--gray-3)":"var(--terminal-green)",cursor:r===i?"not-allowed":"pointer",fontFamily:"inherit",fontSize:"1.2rem"},children:"NEXT >"})]})]}),n.length>0&&e.jsx("div",{className:"prompt-terminal",style:{textAlign:"center",padding:"20px",marginTop:"20px"},children:e.jsxs("div",{className:"prompt-text",children:["> ",n.length," FRAGMENTS_AVAILABLE",e.jsx("br",{}),i>1&&e.jsxs(e.Fragment,{children:["> SHOWING ",v+1,"-",Math.min(S,n.length)," OF ",n.length,e.jsx("br",{})]}),"> CLICK_TO_MANIFEST_REALITY"]})})]})})}function M(){const[l,m]=s.useState(null),[A,n]=s.useState(!1),[h,c]=s.useState(null),u=g=>{m(g),n(!1);const j=g.cleaned_prompt.length,p=Math.max(8e3,Math.min(12e3,j*40));c(p);const d=document.getElementById("gnosisLevel");d&&(d.textContent="0%")},x=()=>{n(!0)};return e.jsxs("div",{className:"art-viewer-container",children:[e.jsxs("header",{className:"art-viewer-header",children:[e.jsx("h1",{className:"glitch",children:"TECHNODADA_GALLERY"}),e.jsx("p",{className:"error-message",children:"WARNING: Visual reality interpretation may vary"})]}),e.jsx(O,{onArtSelect:u}),l&&e.jsxs("div",{className:"content-display",children:[e.jsx(k,{prompt:(l==null?void 0:l.cleaned_prompt)||null,syncDuration:h,onTypingComplete:x}),e.jsx(D,{imageUrl:l?`https://f005.backblazeb2.com/file/td-website/${l.backblaze_path}`:null,startReveal:l!==null,syncDuration:h})]}),e.jsxs("nav",{className:"error-nav",style:{textAlign:"center",marginTop:"40px"},children:[e.jsx("a",{href:"/",className:"error-link",children:"[RETURN_TO_404]"}),e.jsx("a",{href:"/pages/poems.html",className:"error-link",children:"[TEXT_VIEWER]"}),e.jsx("a",{href:"/pages/gallery.html",className:"error-link",children:"[BROWSE_GALLERY]"}),e.jsx("a",{href:"/pages/tools.html",className:"error-link",children:"[ACCESS_TOOLS]"})]})]})}G.createRoot(document.getElementById("root")).render(e.jsx(s.StrictMode,{children:e.jsx(M,{})}));
