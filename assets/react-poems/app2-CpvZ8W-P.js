import{r as a,j as e,P as T,I,c as y}from"./App-BSjcoG4l.js";function L({onArtSelect:r}){const[c,N]=a.useState([]),[n,m]=a.useState([]),[i,p]=a.useState("dadacat"),[g,d]=a.useState(!0),[u,h]=a.useState(null),[o,x]=a.useState({});a.useEffect(()=>{E()},[]),a.useEffect(()=>{b()},[c,i]);const E=async()=>{try{console.log("Attempting to fetch data...");const t=await fetch("https://f005.backblazeb2.com/file/td-website/index.json");if(console.log("Response received:",t.status,t.statusText),!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();if(console.log("Raw data received:",s),!s.images||!Array.isArray(s.images))throw new Error("Invalid data structure - no images array");const l=s.images.filter(j=>j.on_website==="yes");console.log("Website eligible items:",l.length),console.log("First few items:",l.slice(0,3)),console.log("Available artprojects:",[...new Set(s.images.map(j=>j.artproject))]),N(l),d(!1)}catch(t){console.error("Error fetching art data:",t),console.error("Error details:",t.message),d(!1)}},b=()=>{console.log("Filtering data. Active project:",i),console.log("Available artprojects:",[...new Set(c.map(l=>l.artproject))]);const t=c.filter(l=>l.artproject===i);console.log("Filtered results:",t.length,"items"),m(t);const s={};t.forEach(l=>{s[l.run_id]="loading"}),x(s)},A=t=>{p(t),h(null);const s=document.getElementById("artMode");s&&(s.textContent=t.toUpperCase())},v=t=>{h(t.run_id),r(t)},_=t=>{x(s=>({...s,[t]:"loaded"}))},f=t=>{x(s=>({...s,[t]:"error"}))},S=t=>`https://f005.backblazeb2.com/file/td-website/${t}`;return g?e.jsx("div",{className:"art-selector-section",children:e.jsxs("div",{className:"terminal-window",children:[e.jsx("div",{className:"terminal-header",children:"> LOADING VISUAL_MATRIX..."}),e.jsx("div",{className:"prompt-terminal",style:{textAlign:"center",padding:"40px"},children:e.jsxs("div",{className:"prompt-text",children:["> INITIALIZING GALLERY_BUFFER",e.jsx("br",{}),"> SCANNING REALITY_FRAGMENTS",e.jsx("br",{}),"> PLEASE_WAIT...",e.jsx("span",{className:"typing-cursor"})]})})]})}):e.jsx("div",{className:"art-selector-section",children:e.jsxs("div",{className:"terminal-window",children:[e.jsx("div",{className:"terminal-header",children:"> SELECT_REALITY_FRAGMENT.EXE"}),e.jsxs("div",{className:"project-buttons",children:[e.jsx("button",{className:`project-button ${i==="dadacat"?"active":""}`,onClick:()=>A("dadacat"),children:"DADACAT"}),e.jsx("button",{className:`project-button ${i==="goatse"?"active":""}`,onClick:()=>A("goatse"),children:"GOATSE GNOSIS"})]}),e.jsx("div",{className:"thumbnail-grid-container",children:n.length===0?e.jsx("div",{className:"prompt-terminal",style:{textAlign:"center",padding:"40px"},children:e.jsxs("div",{className:"prompt-text",children:["> NO_FRAGMENTS_FOUND",e.jsx("br",{}),"> REALITY_BUFFER_EMPTY"]})}):e.jsx("div",{className:"thumbnail-grid",children:n.map(t=>e.jsxs("div",{className:`thumbnail-item ${u===t.run_id?"selected":""}`,onClick:()=>v(t),children:[o[t.run_id]==="loading"&&e.jsx("div",{className:"thumbnail-loading",children:"LOADING..."}),o[t.run_id]==="error"&&e.jsx("div",{className:"thumbnail-loading",children:"ERROR_LOADING"}),e.jsx("img",{src:S(t.backblaze_path),alt:`Fragment ${t.run_id}`,className:"thumbnail-image",onLoad:()=>_(t.run_id),onError:()=>f(t.run_id),style:{display:o[t.run_id]==="loaded"?"block":"none"}}),e.jsxs("div",{className:"thumbnail-overlay",children:["FRAGMENT_",t.run_id.slice(-6)]})]},t.run_id))})}),n.length>0&&e.jsx("div",{className:"prompt-terminal",style:{textAlign:"center",padding:"20px",marginTop:"20px"},children:e.jsxs("div",{className:"prompt-text",children:["> ",n.length," FRAGMENTS_AVAILABLE",e.jsx("br",{}),"> CLICK_TO_MANIFEST_REALITY"]})})]})})}function R(){const[r,c]=a.useState(null),[N,n]=a.useState(!1),[m,i]=a.useState(null),p=d=>{c(d),n(!1);const u=d.cleaned_prompt.length,h=Math.max(8e3,Math.min(12e3,u*40));i(h);const o=document.getElementById("gnosisLevel");o&&(o.textContent="0%")},g=()=>{n(!0)};return e.jsxs("div",{className:"art-viewer-container",children:[e.jsxs("header",{className:"art-viewer-header",children:[e.jsx("h1",{className:"glitch",children:"TECHNODADA_GALLERY"}),e.jsx("p",{className:"error-message",children:"WARNING: Visual reality interpretation may vary"})]}),e.jsx(L,{onArtSelect:p}),r&&e.jsxs("div",{className:"content-display",children:[e.jsx(T,{prompt:(r==null?void 0:r.cleaned_prompt)||null,syncDuration:m,onTypingComplete:g}),e.jsx(I,{imageUrl:r?`https://f005.backblazeb2.com/file/td-website/${r.backblaze_path}`:null,startReveal:r!==null,syncDuration:m})]}),e.jsxs("nav",{className:"error-nav",style:{textAlign:"center",marginTop:"40px"},children:[e.jsx("a",{href:"/",className:"error-link",children:"[RETURN_TO_404]"}),e.jsx("a",{href:"/pages/poems.html",className:"error-link",children:"[TEXT_VIEWER]"}),e.jsx("a",{href:"/pages/gallery.html",className:"error-link",children:"[BROWSE_GALLERY]"}),e.jsx("a",{href:"/pages/tools.html",className:"error-link",children:"[ACCESS_TOOLS]"})]})]})}y.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(R,{})}));
